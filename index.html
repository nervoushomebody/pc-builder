<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VR Комп'ютерна Архітектура</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-super-hands-component@3.0.1/dist/aframe-super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
</head>
<body>
<a-scene physics="debug: false" vr-mode-ui="enabled: true" shadow="type: pcfsoft" renderer="colorManagement: true">

    <!-- Освітлення -->
    <a-entity light="type: ambient; color: #AAA; intensity: 0.3"></a-entity>
    <a-entity light="type: directional; color: #FFF; intensity: 0.8; cast-shadow: true"
              position="-1 3 1" rotation="-45 0 0"></a-entity>

    <!-- Оточення -->
    <a-sky color="#ECECEC"></a-sky>

    <!-- Камера -->
    <a-entity id="player" movement-controls="speed: 0.1">
        <a-entity id="camera" 
                  camera="active: true" 
                  position="0 1.6 0"
                  look-controls="pointerLockEnabled: false">
        </a-entity>
    </a-entity>

    <!-- Контролери -->
    <a-entity hand-controls="hand: left; handModelStyle: lowPoly; color: #ffaaaa" super-hands></a-entity>
    <a-entity hand-controls="hand: right; handModelStyle: lowPoly; color: #aaaaff" super-hands></a-entity>

    <!-- МОДЕЛІ КОМПОНЕНТІВ З НАПИСАМИ -->

    <!-- CPU -->
    <a-entity gltf-model="#cpu-model" position="-2 1 -2" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Процесор" data-description="Центральний процесор комп’ютера.">
        <a-text value="CPU" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- Материнська плата -->
    <a-entity gltf-model="#motherboard-model" position="-1 1 -2" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Материнська плата" data-description="Основа для підключення всіх компонентів.">
        <a-text value="Motherboard" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- RAM -->
    <a-entity gltf-model="#ram-model" position="0 1 -2" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Оперативна пам’ять" data-description="Тимчасове збереження даних.">
        <a-text value="RAM" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- GPU -->
    <a-entity gltf-model="#gpu-model" position="1 1 -2" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Відеокарта" data-description="Обробка графіки та відео.">
        <a-text value="GPU" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- PSU -->
    <a-entity gltf-model="#psu-model" position="2 1 -2" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Блок живлення" data-description="Постачає електроенергію компонентам.">
        <a-text value="PSU" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- HDD -->
    <a-entity gltf-model="#hdd-model" position="-1 1 -3" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Жорсткий диск" data-description="Довготривале збереження даних.">
        <a-text value="HDD" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- FAN -->
    <a-entity gltf-model="#fan-model" position="0 1 -3" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Вентилятор" data-description="Охолодження системи.">
        <a-text value="Fan" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- CASE -->
    <a-entity gltf-model="#case-model" position="1 1 -3" scale="0.5 0.5 0.5"
              class="clickable" grabbable hoverable stretchable
              data-component="Корпус" data-description="Фізичний контейнер для компонентів.">
        <a-text value="Case" align="center" color="black" position="0 0.6 0"></a-text>
    </a-entity>

    <!-- Інформаційна панель -->
    <a-entity id="info-panel" position="0 2 -2" visible="false">
        <a-plane color="#333" width="1.5" height="0.8" position="0 0 0" shadow="receive: true"></a-plane>
        <a-text id="component-name" value="" color="white" position="-0.7 0.3 0.01" width="1.4"></a-text>
        <a-text id="component-description" value="" color="white" position="-0.7 0 0.01" width="1.4" wrap-count="30"></a-text>
    </a-entity>

    <!-- Ассети моделей -->
    <a-assets>
        <a-asset-item id="cpu-model" src="models/cpu.glb"></a-asset-item>
        <a-asset-item id="motherboard-model" src="models/motherboard.glb"></a-asset-item>
        <a-asset-item id="ram-model" src="models/ram.glb"></a-asset-item>
        <a-asset-item id="gpu-model" src="models/gpu.glb"></a-asset-item>
        <a-asset-item id="psu-model" src="models/psu.glb"></a-asset-item>
        <a-asset-item id="case-model" src="models/case.glb"></a-asset-item>
        <a-asset-item id="fan-model" src="models/fan.glb"></a-asset-item>
        <a-asset-item id="hdd-model" src="models/hdd.glb"></a-asset-item>
    </a-assets>

    <!-- JS логіка -->
    <script>
        // Підказки при наведенні
        AFRAME.registerComponent('component-info', {
            init: function() {
                this.el.addEventListener('hover-start', () => {
                    const panel = document.querySelector('#info-panel');
                    panel.setAttribute('visible', true);
                    panel.setAttribute('position', {
                        x: this.el.object3D.position.x + 0.5,
                        y: this.el.object3D.position.y,
                        z: this.el.object3D.position.z
                    });
                    document.querySelector('#component-name').setAttribute('value',
                        this.el.getAttribute('data-component'));
                    document.querySelector('#component-description').setAttribute('value',
                        this.el.getAttribute('data-description'));
                });
                this.el.addEventListener('hover-end', () => {
                    document.querySelector('#info-panel').setAttribute('visible', false);
                });
            }
        });

        // Ініціалізація
        document.querySelectorAll('.clickable').forEach(el => {
            el.setAttribute('component-info', '');
        });
    </script>

</a-scene>
</body>
</html>
