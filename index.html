<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame VR Scene with Physics and Interactions</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@v7.5.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/super-hands@3.0.3/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
</head>
<body>
    <a-scene physics="gravity: -9.8; debug: false">
        <!-- Assets -->
        <a-assets>
            <a-mixin id="grabbable"
                     hoverable grabbable stretchable draggable
                     event-set__hoveron="_event: hover-start; material.opacity: 0.7"
                     event-set__hoveroff="_event: hover-end; material.opacity: 1"
                     event-set__dragstart="_event: drag-start; material.emissive: #2f2f2f"
                     event-set__dragend="_event: drag-end; material.emissive: #000000">
            </a-mixin>
        </a-assets>

        <!-- Environment -->
        <a-sky color="#ECECEC"></a-sky>
        
        <!-- Ground -->
        <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="20" 
            height="20" 
            color="#7BC8A4"
            static-body
            shadow="receive: true">
        </a-plane>

        <!-- Table -->
        <a-box 
            id="table"
            position="0 0.75 -3" 
            width="3" 
            height="0.1" 
            depth="2"
            color="#8B4513"
            static-body
            shadow>
        </a-box>
        <!-- Table legs -->
        <a-box position="-1.3 0.375 -2.3" width="0.1" height="0.75" depth="0.1" color="#654321" static-body></a-box>
        <a-box position="1.3 0.375 -2.3" width="0.1" height="0.75" depth="0.1" color="#654321" static-body></a-box>
        <a-box position="-1.3 0.375 -3.7" width="0.1" height="0.75" depth="0.1" color="#654321" static-body></a-box>
        <a-box position="1.3 0.375 -3.7" width="0.1" height="0.75" depth="0.1" color="#654321" static-body></a-box>

        <!-- Grabbable Boxes on table -->
        <a-box 
            mixin="grabbable"
            position="-0.5 1.2 -3" 
            width="0.3" 
            height="0.3" 
            depth="0.3"
            color="#FF6B6B"
            dynamic-body
            shadow>
        </a-box>
        
        <a-box 
            mixin="grabbable"
            position="0.5 1.2 -3" 
            width="0.4" 
            height="0.4" 
            depth="0.4"
            color="#4ECDC4"
            dynamic-body
            shadow>
        </a-box>
        
        <a-box 
            mixin="grabbable"
            position="0 1.5 -3.5" 
            width="0.35" 
            height="0.35" 
            depth="0.35"
            color="#FFE66D"
            dynamic-body
            shadow>
        </a-box>

        <!-- Grabbable Spheres -->
        <a-sphere 
            mixin="grabbable"
            position="-1.5 0.3 -2" 
            radius="0.3" 
            color="#95E1D3"
            dynamic-body
            shadow>
        </a-sphere>
        
        <a-sphere 
            mixin="grabbable"
            position="1.5 0.25 -2.5" 
            radius="0.25" 
            color="#F3B8F3"
            dynamic-body
            shadow>
        </a-sphere>
        
        <a-sphere 
            mixin="grabbable"
            position="0 0.4 -1" 
            radius="0.4" 
            color="#FFB6C1"
            dynamic-body
            shadow>
        </a-sphere>

        <!-- Additional scattered objects -->
        <a-box 
            mixin="grabbable"
            position="-2.5 0.2 -4" 
            width="0.4" 
            height="0.4" 
            depth="0.4"
            color="#DDA0DD"
            dynamic-body
            shadow>
        </a-box>
        
        <a-sphere 
            mixin="grabbable"
            position="2.5 0.3 -4.5" 
            radius="0.3" 
            color="#98FB98"
            dynamic-body
            shadow>
        </a-sphere>

        <!-- Player rig with movement and hand controls -->
        <a-entity id="rig" movement-controls position="0 0 2">
            <!-- Camera -->
            <a-entity 
                id="camera"
                camera
                position="0 1.6 0"
                look-controls>
                <!-- Desktop cursor -->
                <a-entity
                    cursor="rayOrigin: mouse"
                    raycaster="objects: [mixin='grabbable'], [clickable]"
                    super-hands="colliderEvent: raycaster-intersection;
                               colliderEventProperty: els;
                               colliderEndEvent: raycaster-intersection-cleared;
                               colliderEndEventProperty: clearedEls">
                </a-entity>
            </a-entity>
            
            <!-- VR Controllers -->
            <a-entity 
                id="leftHand"
                hand-controls="hand: left"
                super-hands="colliderEvent: collisions;
                           colliderEventProperty: els;
                           colliderEndEvent: collisions-cleared;
                           colliderEndEventProperty: clearedEls">
            </a-entity>
            
            <a-entity 
                id="rightHand"
                hand-controls="hand: right"
                super-hands="colliderEvent: collisions;
                           colliderEventProperty: els;
                           colliderEndEvent: collisions-cleared;
                           colliderEndEventProperty: clearedEls">
            </a-entity>
        </a-entity>

        <!-- Lighting -->
        <a-light type="ambient" color="#BBB"></a-light>
        <a-light type="directional" color="#FFF" intensity="0.6" position="-0.5 1 1" shadow></a-light>
    </a-scene>

    <script>
        // Add some interactivity feedback
        document.addEventListener('DOMContentLoaded', function() {
            // Log when objects are grabbed/released
            const grabbables = document.querySelectorAll('[mixin="grabbable"]');
            grabbables.forEach(el => {
                el.addEventListener('grab-start', function(evt) {
                    console.log('Grabbed:', el);
                });
                el.addEventListener('grab-end', function(evt) {
                    console.log('Released:', el);
                });
            });
        });
    </script>
</body>
</html>
