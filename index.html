<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple VR PC Builder</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script>
    <script src="https://unpkg.com/super-hands@^3.0.3/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
    
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <a-scene physics="debug: false; gravity: -9.8">
        <!-- Assets -->
        <a-assets>
            <img id="ground" src="https://cdn.aframe.io/a-painter/images/floor.jpg">
            <img id="sky" src="https://cdn.aframe.io/a-painter/images/sky.jpg">
        </a-assets>

        <!-- Environment -->
        <a-sky src="#sky"></a-sky>
        <a-plane id="ground-plane" 
                 src="#ground" 
                 rotation="-90 0 0" 
                 width="20" 
                 height="20" 
                 static-body></a-plane>

        <!-- Work Table -->
        <a-box id="table" 
               position="0 0.5 -3" 
               width="4" 
               height="0.1" 
               depth="2" 
               color="#8B4513" 
               static-body="shape: box"></a-box>
        
        <!-- PC Case (simplified) -->
        <a-entity id="pc-case" position="-1 0.6 -3">
            <!-- Bottom -->
            <a-box position="0 0 0" 
                   width="0.4" 
                   height="0.02" 
                   depth="0.5" 
                   color="#2a2a2a" 
                   static-body="shape: box"></a-box>
            <!-- Back wall -->
            <a-box position="-0.19 0.2 0" 
                   width="0.02" 
                   height="0.4" 
                   depth="0.5" 
                   color="#2a2a2a" 
                   static-body="shape: box"></a-box>
        </a-entity>

        <!-- PC Components -->
        <!-- Motherboard -->
        <a-box id="motherboard" 
               class="interactable"
               position="1 0.65 -3" 
               width="0.3" 
               height="0.02" 
               depth="0.35" 
               color="#1a5f1a"
               hoverable grabbable draggable droppable
               dynamic-body="shape: box">
        </a-box>

        <!-- CPU -->
        <a-box id="cpu" 
               class="interactable"
               position="1.5 0.65 -3" 
               width="0.08" 
               height="0.02" 
               depth="0.08" 
               color="#4a4a4a"
               hoverable grabbable draggable droppable
               dynamic-body="shape: box">
        </a-box>

        <!-- RAM -->
        <a-box id="ram" 
               class="interactable"
               position="1 0.65 -2.5" 
               width="0.12" 
               height="0.02" 
               depth="0.03" 
               color="#2a7a2a"
               hoverable grabbable draggable droppable
               dynamic-body="shape: box">
        </a-box>

        <!-- GPU -->
        <a-box id="gpu" 
               class="interactable"
               position="1.5 0.65 -2.5" 
               width="0.25" 
               height="0.03" 
               depth="0.15" 
               color="#3a3a8a"
               hoverable grabbable draggable droppable
               dynamic-body="shape: box">
        </a-box>

        <!-- Power Supply -->
        <a-box id="psu" 
               class="interactable"
               position="1 0.65 -3.5" 
               width="0.15" 
               height="0.08" 
               depth="0.15" 
               color="#5a5a5a"
               hoverable grabbable draggable droppable
               dynamic-body="shape: box">
        </a-box>

        <!-- Lights -->
        <a-light type="ambient" color="#404040"></a-light>
        <a-light type="directional" position="0 5 0" rotation="-90 0 0" intensity="0.6"></a-light>

        <!-- Camera Rig -->
        <a-entity id="rig" position="0 0 0">
            <!-- Camera -->
            <a-camera id="camera" 
                      position="0 1.6 0" 
                      look-controls 
                      wasd-controls>
                <a-cursor position="0 0 -1"
                          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                          material="color: white; shader: flat"
                          cursor="rayOrigin: mouse; fuse: false"
                          raycaster="objects: .interactable">
                </a-cursor>
            </a-camera>

            <!-- VR Controllers -->
            <a-entity id="leftHand" 
                      hand-controls="hand: left"
                      sphere-collider="objects: .interactable"
                      super-hands>
            </a-entity>
            
            <a-entity id="rightHand" 
                      hand-controls="hand: right"
                      sphere-collider="objects: .interactable"
                      super-hands>
            </a-entity>
        </a-entity>

        <!-- Simple movement and rotation script -->
        <script>
            // Component for highlighting on hover
            AFRAME.registerComponent('hoverable', {
                init: function () {
                    var el = this.el;
                    var originalColor = el.getAttribute('color');
                    
                    el.addEventListener('mouseenter', function () {
                        el.setAttribute('color', '#ffff00');
                    });
                    
                    el.addEventListener('mouseleave', function () {
                        el.setAttribute('color', originalColor);
                    });
                }
            });

            // Simple VR movement
            AFRAME.registerComponent('simple-vr-controls', {
                init: function() {
                    var rig = document.querySelector('#rig');
                    var speed = 0.05;
                    
                    this.el.addEventListener('thumbstickmoved', function(evt) {
                        // Left controller - movement
                        if (evt.detail.hand === 'left' && evt.detail.y !== 0) {
                            var camera = document.querySelector('#camera');
                            var angle = camera.object3D.rotation.y;
                            var moveX = Math.sin(angle) * evt.detail.y * speed;
                            var moveZ = Math.cos(angle) * evt.detail.y * speed;
                            
                            var pos = rig.getAttribute('position');
                            rig.setAttribute('position', {
                                x: pos.x - moveX,
                                y: pos.y,
                                z: pos.z - moveZ
                            });
                        }
                        
                        // Right controller - rotation
                        if (evt.detail.hand === 'right' && Math.abs(evt.detail.x) > 0.8) {
                            var rot = rig.getAttribute('rotation');
                            var turnAmount = evt.detail.x > 0 ? 30 : -30;
                            rig.setAttribute('rotation', {
                                x: rot.x,
                                y: rot.y + turnAmount,
                                z: rot.z
                            });
                        }
                    });
                }
            });

            // Apply controls to hands
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(function() {
                    document.querySelector('#leftHand').setAttribute('simple-vr-controls', '');
                    document.querySelector('#rightHand').setAttribute('simple-vr-controls', '');
                }, 1000);
            });
        </script>
    </a-scene>

    <div class="info">
        <strong>VR Controls:</strong><br>
        Left Stick: Move forward/backward<br>
        Right Stick: Turn left/right<br>
        Trigger: Grab objects<br>
        <br>
        <strong>Desktop:</strong><br>
        WASD: Move, Mouse: Look<br>
        Click: Grab objects<br>
    </div>
</body>
</html>
