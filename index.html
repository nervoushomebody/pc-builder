<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PC Builder â€” Desktop Edition</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #info {
      position: absolute; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.6);
      padding: 10px; font-family: sans-serif;
    }
  </style>
</head>
<body>
<div id="info">
  WASD: Move | Click + drag: Move parts | 1/2/3: Rotate X/Y/Z
</div>
<a-scene>
  <a-assets>
    <a-asset-item id="mb" src="models/motherboard.glb"></a-asset-item>
    <a-asset-item id="cpu" src="models/cpu.glb"></a-asset-item>
    <a-asset-item id="gpu" src="models/gpu.glb"></a-asset-item>
    <a-asset-item id="ram" src="models/ram.glb"></a-asset-item>
    <a-asset-item id="psu" src="models/psu.glb"></a-asset-item>
    <a-asset-item id="fan" src="models/fan.glb"></a-asset-item>
    <a-asset-item id="ssd" src="models/ssd.glb"></a-asset-item>
    <a-asset-item id="case" src="models/case.glb"></a-asset-item>
  </a-assets>

  <a-entity camera look-controls wasd-controls position="0 1.6 5"></a-entity>

  <!-- Lighting -->
  <a-light type="directional" position="0 5 0" intensity="1.5" color="#ffffff"></a-light>
  <a-light type="ambient" intensity="0.4"></a-light>

  <a-box position="0 0 -2" width="3" height="0.05" depth="3" color="#555"></a-box>

  <!-- Components -->
  <a-entity id="mb-entity" gltf-model="#mb" position="-3 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="cpu-entity" gltf-model="#cpu" position="-2 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="gpu-entity" gltf-model="#gpu" position="-1 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="ram-entity" gltf-model="#ram" position="0 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="psu-entity" gltf-model="#psu" position="1 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="fan-entity" gltf-model="#fan" position="2 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="ssd-entity" gltf-model="#ssd" position="3 0.5 -2" scale="0.5 0.5 0.5"></a-entity>
  <a-entity id="case-entity" gltf-model="#case" position="0 0.5 0" scale="0.5 0.5 0.5"></a-entity>

  <a-plane rotation="-90 0 0" width="20" height="20" color="#222"></a-plane>
</a-scene>
<script>
  const raycaster = new THREE.Raycaster();
  const mouse = new THREE.Vector2();
  let selected = null;

  window.addEventListener('mousedown', e => {
    mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
    const camera = document.querySelector('[camera]').getObject3D('camera');
    raycaster.setFromCamera(mouse, camera);
    const selectable = Array.from(document.querySelectorAll('[gltf-model]')).map(el => el.getObject3D('mesh')).filter(m => m);
    const intersects = raycaster.intersectObjects(selectable, true);
    if (intersects.length) selected = intersects[0].object.el;
  });

  window.addEventListener('mouseup', () => selected = null);

  window.addEventListener('mousemove', e => {
    if (!selected) return;
    mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
    const camera = document.querySelector('[camera]').getObject3D('camera');
    raycaster.setFromCamera(mouse, camera);
    const plane = document.querySelector('a-plane').getObject3D('mesh');
    const intersect = raycaster.intersectObject(plane);
    if (intersect.length) {
      selected.object3D.position.set(intersect[0].point.x, 0.5, intersect[0].point.z);
    }
  });

  window.addEventListener('keydown', e => {
    if (!selected) return;
    const rot = selected.object3D.rotation;
    if (e.key === '1') rot.x += Math.PI / 4;
    if (e.key === '2') rot.y += Math.PI / 4;
    if (e.key === '3') rot.z += Math.PI / 4;
  });
</script>
</body>
</html>
